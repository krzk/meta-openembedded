From 2f69ba75608619ba7fc962b1a0338682b644a406 Mon Sep 17 00:00:00 2001
From: Krzysztof Kozlowski <krzysztof.kozlowski@proceq.com>
Date: Thu, 31 May 2018 16:22:23 +0200
Subject: [PATCH] Makefile: Use supplied LDFLAGS to silence OE GNU_HASH QA
 warning

Fix OpenEmbedded/Yocto QA warning:

    ERROR: lshw-02.16-r1 do_package_qa: QA Issue: No GNU_HASH in the elf binary: 'build/tmp/work/cortexa5hf-neon-poky-linux-gnueabi/lshw/02.16-r1/packages-split/lshw/usr/sbin/lshw' [ldflags]
    ERROR: lshw-02.16-r1 do_package_qa: QA run found fatal errors. Please consider fixing them.
    ERROR: lshw-02.16-r1 do_package_qa: Function failed: do_package_qa

Signed-off-by: Krzysztof Kozlowski <krzysztof.kozlowski@proceq.com>
---
 src/Makefile | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/src/Makefile b/src/Makefile
index f474ff9d56b3..dd7a2a400be2 100644
--- a/src/Makefile
+++ b/src/Makefile
@@ -25,7 +25,7 @@ CXXFLAGS=-g -Wall -g $(INCLUDES) $(DEFINES) $(RPM_OPT_FLAGS)
 ifeq ($(SQLITE), 1)
 	CXXFLAGS+= -DSQLITE $(shell pkg-config --cflags sqlite3)
 endif
-LDFLAGS=-L./core/ -g
+LDFLAGS+=-L./core/ -g
 ifneq ($(shell $(LD) --help 2| grep -- --as-needed), )
 	LDFLAGS+= -Wl,--as-needed
 endif
-- 
2.7.4

